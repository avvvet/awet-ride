(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),i=a.n(l),c=(a(81),a(15)),o=a(16),s=a(19),u=a(17),d=a(18),p=a(169),m=a(170),v=a(161),f=a(171),h=a(168),g=a(162),E=a(172),y=a(163),b=a(164),k=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(h.a.Toggle,null),r.a.createElement(h.a.Header,null,r.a.createElement(h.a.Brand,null,r.a.createElement(g.a,{src:"/assets/awet-ride-m.png",height:45})),r.a.createElement(h.a.Brand,null,r.a.createElement("a",{href:""},"awet-ride"))),r.a.createElement(h.a.Collapse,null,r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement(f.a,{to:"/"},"Home")),r.a.createElement(y.a,null,r.a.createElement(f.a,{to:"/dropoff"},"Map")),r.a.createElement(y.a,null,r.a.createElement(f.a,{to:"/about"},"About")),r.a.createElement(y.a,null,r.a.createElement(f.a,{to:"/contact"},"Contact"))),r.a.createElement(E.a,{pullRight:!0},r.a.createElement(y.a,{eventKey:1,href:"#"}),r.a.createElement(y.a,{eventKey:2,href:"#"},r.a.createElement(b.a,{bsSize:"small"},"Sign in")))))}}]),t}(n.Component),_=a(11),O=a.n(_),j=a(35),S=a(43),w=a.n(S),N=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).getList=function(){fetch("/api/getList").then(function(e){return e.json()}).then(function(t){return e.setState({list:t})})},e.state={pickup_flag:!1,pickup_location:"Select your pickup location",pickup_latlng:{lat:0,lng:0},map:"",markersLayer:"",list:[]},e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=O.a.map("mapid").setView([9.0092,38.7645],16);this.setState({map:e}),O.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);var t=(new O.a.LayerGroup).addTo(e);this.setState({markersLayer:t}),e.on("locationfound",function(t){var a=t.accuracy/128;O.a.marker(t.latlng).addTo(e).bindPopup("YOU are"+a+" meters from this point").openPopup(),O.a.circle(t.latlng,a).addTo(e)}),e.on("locationerror",function(e){alert(e.message)})}},{key:"componentDidUpdate",value:function(){var e,t=this,a=this.state.map,n=this.state.markersLayer;a.on("click",function(a){j.reverseGeocode({lat:a.latlng.lat,lon:a.latlng.lng,addressdetails:!0}).then(function(r){n.clearLayers(),e=O.a.marker(a.latlng).addTo(n).bindPopup("<div class='popup-title'> Your pickup location is </div><div class='popup-content'>"+r.display_name+"</div>").openPopup(),n.addLayer(e),t.setState({pickup_location:r.display_name,pickup_latlng:a.latlng,pickup_flag:!0});var l=a.latlng;localStorage.setItem("session_pickup",JSON.stringify(l))}).catch(function(e){console.error(e)})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"mapid",id:"mapid"}),r.a.createElement("div",{className:"div-pickup"},r.a.createElement("div",{className:"style-1"},r.a.createElement("h6",null,"First step : Pickup location")),r.a.createElement("div",{className:"div-pickup-address"},this.state.pickup_location),r.a.createElement("div",{className:"div-pickup-btn-box"},r.a.createElement(f.a,{to:"/dropoff"},r.a.createElement(b.a,{bsStyle:"success",bsSize:"small",block:!0},"Continue")))))}}]),t}(n.Component),L=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={pickupAdress:"Lord my God you have plan in my life",pickup_latlng:{lat:0,lng:0}},e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N,{pickupAdress:this.state.pickup_latlng}))}}]),t}(n.Component),x=a(22),T=a(116),D=a(165),C=a(166),B=a(167),M=(a(155),a(156),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).getNearestDriver=function(t){w.a.ajax({type:"POST",url:"/driver/getNearestDriver",data:JSON.stringify(t),contentType:"application/json",success:function(e,t,a){console.log("Nearest driver",e),document.getElementById("div-request").style.visibility="visible",this.setState({driver:e})}.bind(Object(x.a)(Object(x.a)(e))),error:function(e,t,a){console.error(e,t,a.toString())}.bind(Object(x.a)(Object(x.a)(e)))})},e.onRequest=function(){fetch("/driver/getNearestDriver",{}),document.getElementById("div-process").innerHTML="",document.getElementById("div-request").style.visibility="visible"},e.NearestDriverComponent=function(e){var t=e.driver;return r.a.createElement("div",null,r.a.createElement(T.a,{fluid:!0},r.a.createElement(D.a,null,r.a.createElement(C.a,{xs:6,md:6},r.a.createElement(g.a,{src:t.car_pic,height:45,circle:!0})),r.a.createElement(C.a,{xs:6,md:6},r.a.createElement(g.a,{src:t.driver_pic,height:45,circle:!0}))),r.a.createElement(D.a,null,r.a.createElement(C.a,{xs:6,md:6},t.model),r.a.createElement(C.a,{xs:6,md:6},t.driver_name)),r.a.createElement(D.a,null,r.a.createElement(C.a,{xs:6,md:6},t.plate),r.a.createElement(C.a,{xs:6,md:6},t.driver_phone))))},e.state={dropoff_flag:!1,pickup_flag:!0,dropoff_location:"Select your pickup location",dropoff_latlng:{lat:9.0092,lng:38.7545},pickup_latlng:{lat:9.0092,lng:38.7645},map:"",markersLayer:"",driver:{id:"",driver_name:"",driver_phone:"",model:"",plate:"",car_pic:"",driver_pic:""},socket_data:""},e.getNearestDriver=e.getNearestDriver.bind(Object(x.a)(Object(x.a)(e))),e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=O.a.map("mapid").setView([9.0092,38.7645],16);this.setState({map:e}),O.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);var t=(new O.a.LayerGroup).addTo(e);this.setState({markersLayer:t}),this.setState({pickup_latlng:JSON.parse(localStorage.getItem("session_pickup"))})}},{key:"componentDidUpdate",value:function(){var e,t=this,a=this.state.map,n=this.state.markersLayer;(a.on("click",function(a){j.reverseGeocode({lat:a.latlng.lat,lon:a.latlng.lng,addressdetails:!0}).then(function(r){n.clearLayers(),e=O.a.marker(a.latlng).addTo(n).bindPopup("<div class='popup-title'> Your dropoff location is </div><div class='popup-content'>"+r.display_name+"</div>").openPopup(),n.addLayer(e),t.setState({dropoff_location:r.display_name,dropoff_latlng:a.latlng,dropoff_flag:!0})}).catch(function(e){console.error(e)})}),this.state.dropoff_flag&&this.state.pickup_flag)&&function(e,t){O.a.Routing.control({waypoints:[e,t]}).on("routesfound",function(e){var t=e.routes,a=t[0].summary.totalDistance,n=t[0].summary.totalTime;a=Number.parseFloat(a/1e3).toFixed(2),n=function(e){var t=e/3600,a=Math.floor(t),n=60*(t-a),r=Math.round(n);return(a>0?a+" hr":"")+(r>0?r+" min":"")}(Number.parseInt(n));var r=Number.parseFloat(25*a).toFixed(2);document.getElementById("ride_price").innerHTML=r+" Birr",document.getElementById("distance").innerHTML=a+" km",document.getElementById("ride_time").innerHTML=n}).addTo(a)}(this.state.pickup_latlng,this.state.dropoff_latlng)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"mapid",id:"mapid"}),r.a.createElement("div",{className:"div-request",id:"div-request"},r.a.createElement(this.NearestDriverComponent,{driver:this.state.driver})),r.a.createElement("div",{className:"div-ride-price"},r.a.createElement("div",null,r.a.createElement(T.a,{fluid:!0},r.a.createElement(D.a,null,r.a.createElement(C.a,{xs:4,md:4},"Price ",r.a.createElement(B.a,null,r.a.createElement("div",{id:"ride_price"}))),r.a.createElement(C.a,{xs:4,md:4},"Distance ",r.a.createElement(B.a,null,r.a.createElement("div",{id:"distance"}))),r.a.createElement(C.a,{xs:4,md:4},"Time ",r.a.createElement(B.a,null,r.a.createElement("div",{id:"ride_time"})))))),r.a.createElement("div",{id:"div-process",className:"div-process"},r.a.createElement("div",{className:"div-pickup-btn-box"},r.a.createElement(b.a,{onClick:function(t){return e.getNearestDriver(e.state.pickup_latlng,t)},bsStyle:"success",bsSize:"small"},"Request Driver")))))}}]),t}(n.Component)),I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={dropoff_location:"Lord my God you have plan in my life",dropoff_latlng:{lat:0,lng:0}},e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(M,{dropoff_latlng:this.state.dropoff_latlang}))}}]),t}(n.Component),P=(a(158),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={lat:9.0089,lng:38.7629,zoom:16},e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){this.state.lat,this.state.lng;return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement(m.a,null,r.a.createElement(v.a,{path:"/",component:L,exact:!0}),r.a.createElement(v.a,{path:"/dropoff",component:I,exact:!0})))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t,a){e.exports=a(160)},81:function(e,t,a){}},[[76,2,1]]]);
//# sourceMappingURL=main.8b11ec96.chunk.js.map