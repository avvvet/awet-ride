(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){e.exports=a(214)},108:function(e,t,a){},209:function(e,t){},212:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),i=a.n(l),o=(a(108),a(10)),c=a(11),s=a(13),m=a(12),d=a(14),u=a(230),p=a(231),f=a(215),g=a(232),v=a(227),h=a(216),E=a(217),b=a(218),y=a(219),_=(n.Component,a(33)),O=a(7),j=a(9),k=a.n(j),x=a(99),S=a(220),N=a(221),w=a(222),L=a(228),T=a(223),D=a(50),P=a(23),I=a.n(P),C=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).getList=function(){fetch("/api/getList").then(function(e){return e.json()}).then(function(t){return e.setState({list:t})})},e.getDrivers=function(t){var a=k.a.icon({iconUrl:"/assets/awet-ride-marker-1.png",shadowUrl:"",iconSize:[80,49],shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]});I.a.ajax({type:"GET",url:"/drivers",contentType:"application/json",success:function(e,n,r){for(var l=0;l<e.length;l++)k.a.marker([e[l].currentLocation[0],e[l].currentLocation[1]],{icon:a}).bindPopup(e[l].firstName+" "+e[l].middleName+" <br> Plate : "+e[l].plateNo).addTo(t)}.bind(Object(O.a)(Object(O.a)(e))),error:function(e,t,a){console.log("getdrivers error",a.toString())}.bind(Object(O.a)(Object(O.a)(e)))})},e.findRoute=function(t,a){var n=e.state.map;k.a.Routing.control({waypoints:[k.a.latLng(t),k.a.latLng(a)]}).on("routesfound",e.routeFound).addTo(n)},e.routeFound=function(t){var a=t.routes,n=a[0].summary.totalDistance,r=a[0].summary.totalTime;n=Number.parseFloat(n/1e3).toFixed(2);var l=function(e){var t=e/3600,a=Math.floor(t),n=60*(t-a),r=Math.round(n);return(a>0?a+" hr":"")+(r>0?r+" min":"")}(Number.parseInt(r));e.setState({route_distance:Number.parseFloat(n).toFixed(2),route_price:i,route_time:r,isRouteFound:!0});var i=Number.parseFloat(19*n).toFixed(2);document.getElementById("ride-price-dashboard").style.visibility="visible",document.getElementById("ride_price").innerHTML=i+" Birr",document.getElementById("distance").innerHTML=n+" km",document.getElementById("ride_time").innerHTML=l},e.rideRequest=function(t){var a={user_id:"7141",driver_id:"0",pickup_latlng:"POINT(".concat(e.state.pickup_latlng.lat," ").concat(e.state.pickup_latlng.lng,")"),dropoff_latlng:"POINT(".concat(e.state.dropoff_latlng.lat," ").concat(e.state.dropoff_latlng.lng,")"),route_distance:e.state.route_distance,route_time:e.state.route_time,route_price:e.state.route_price,status:1};I.a.ajax({type:"POST",url:"/ride/rideRequest",data:JSON.stringify(a),contentType:"application/json",success:function(e,t,a){console.log("Nearest driver",e),document.getElementById("div-request").style.visibility="visible",this.setState({driver:e})}.bind(Object(O.a)(Object(O.a)(e))),error:function(e,t,a){console.error(e,t,a.toString())}.bind(Object(O.a)(Object(O.a)(e)))})},e.change=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.state={pickup_flag:"off",dropoff_flag:"off",pickup_location:"Select your pickup location",pickup_latlng:{lat:0,lng:0},dropoff_latlng:{lat:0,lng:0},route_price:0,route_distance:0,route_time:0,isRouteFound:!1,map:"",markersLayer:"",list:[],currentDrivers:[],pickupText:"",dropoffText:""},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=k.a.map("mapid").setView([9.0092,38.7645],16);e.locate({setView:!0,maxZoom:17}),this.setState({map:e}),k.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);var t=(new k.a.LayerGroup).addTo(e);this.setState({markersLayer:t}),e.on("locationfound",function(t){var a=t.accuracy/128;k.a.marker(t.latlng).addTo(e).bindPopup("YOU are"+a+" meters from this point").openPopup()}),e.on("locationerror",function(e){alert(e.message)}),this.getDrivers(e)}},{key:"componentDidUpdate",value:function(){var e,t=this,a=this.state.map,n=this.state.markersLayer;if(a.on("click",function(a){D.reverseGeocode({lat:a.latlng.lat,lon:a.latlng.lng,addressdetails:!0}).then(function(r){if("off"===t.state.pickup_flag){e=k.a.marker(a.latlng).addTo(n).bindPopup("<div class='popup-title'> Your pickup </div><div class='popup-content'> driver will come here.</div>"),n.addLayer(e),t.setState({pickupText:r.display_name,pickup_latlng:a.latlng,pickup_flag:"on"});var l=a.latlng;localStorage.setItem("session_pickup",JSON.stringify(l))}else"on"===t.state.pickup_flag&&"off"===t.state.dropoff_flag&&(e=k.a.marker(a.latlng).addTo(n).bindPopup("<div class='popup-title'> Your dropoff </div><div class='popup-content'> ride ends here.</div>"),n.addLayer(e),t.setState({dropoffText:r.display_name,dropoff_latlng:a.latlng,dropoff_flag:"on"}));console.log("pickup",t.state.pickup_flag),console.log("dropoff",t.state.dropoff_flag)}).catch(function(e){console.error(e)})}),"on"===this.state.dropoff_flag&&"on"===this.state.pickup_flag&!1===this.state.isRouteFound){var r=this.state.pickup_latlng,l=this.state.dropoff_latlng;this.findRoute(r,l)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"user-dashboard"},r.a.createElement(x.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:9,sm:9,md:9},r.a.createElement(w.a,null,r.a.createElement(L.a,{bsSize:"sm",name:"pickupText",type:"text",value:this.state.pickupText,placeholder:"Select pickup",onChange:function(t){return e.change(t)}}))),r.a.createElement(N.a,{xs:1,sm:1,md:1},r.a.createElement(y.a,{bsSize:"sm",bsStyle:"link"},"Cancel"))),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:9,sm:9,md:9},r.a.createElement(w.a,null,r.a.createElement(L.a,{bsSize:"sm",name:"dropoffText",type:"text",value:this.state.dropoffText,placeholder:"Select your dropoff",onChange:function(t){return e.change(t)}}))),r.a.createElement(N.a,{xs:1,sm:1,md:1},r.a.createElement(y.a,{bsSize:"sm",bsStyle:"link"},"Cancel"))))),r.a.createElement("div",{className:"ride-price-dashboard",id:"ride-price-dashboard"},r.a.createElement("div",null,r.a.createElement(x.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:4,md:4},"Price ",r.a.createElement(T.a,null,r.a.createElement("div",{id:"ride_price"}))),r.a.createElement(N.a,{xs:4,md:4},"Distance ",r.a.createElement(T.a,null,r.a.createElement("div",{id:"distance"}))),r.a.createElement(N.a,{xs:4,md:4},"Time ",r.a.createElement(T.a,null,r.a.createElement("div",{id:"ride_time"})))),r.a.createElement(S.a,{className:"rowPadding"},r.a.createElement(N.a,{xs:6,sm:6,md:6},r.a.createElement(y.a,{onClick:function(t){return e.rideRequest(e.state.pickup_latlng,t)},bsStyle:"success",bsSize:"small"},"Request ride")),r.a.createElement(N.a,{xs:6,sm:6,md:6},r.a.createElement(y.a,{bsStyle:"danger",bsSize:"small"},"Cancel ride"))))),r.a.createElement("div",{id:"div-process",className:"div-process"},r.a.createElement("div",{className:"div-pickup-btn-box"}))),r.a.createElement("div",{className:"mapid",id:"mapid"}))}}]),t}(n.Component),F=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={pickupAdress:"Lord my God you have plan in my life",pickup_latlng:{lat:0,lng:0}},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C,{pickupAdress:this.state.pickup_latlng}))}}]),t}(n.Component),R=(a(181),a(182),a(51)),B=a.n(R),M=B()("http://localhost:5000"),q=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).rideRequest=function(t){var a={user_id:"7141",driver_id:"0",pickup_latlng:"POINT(".concat(e.state.pickup_latlng.lat," ").concat(e.state.pickup_latlng.lng,")"),dropoff_latlng:"POINT(".concat(e.state.dropoff_latlng.lat," ").concat(e.state.dropoff_latlng.lng,")"),route_distance:e.state.route_distance,route_time:e.state.route_time,route_price:e.state.route_price,status:1};I.a.ajax({type:"POST",url:"/ride/rideRequest",data:JSON.stringify(a),contentType:"application/json",success:function(e,t,a){console.log("Nearest driver",e),document.getElementById("div-request").style.visibility="visible",this.setState({driver:e}),M.emit("request_driver",{msg:"test"})}.bind(Object(O.a)(Object(O.a)(e))),error:function(e,t,a){console.error(e,t,a.toString())}.bind(Object(O.a)(Object(O.a)(e)))})},e.findRoute=function(t,a){var n=e.state.map;k.a.Routing.control({waypoints:[k.a.latLng(t),k.a.latLng(a)]}).on("routesfound",e.routeFound).addTo(n)},e.routeFound=function(t){var a=t.routes,n=a[0].summary.totalDistance,r=a[0].summary.totalTime;n=Number.parseFloat(n/1e3).toFixed(2);var l=function(e){var t=e/3600,a=Math.floor(t),n=60*(t-a),r=Math.round(n);return(a>0?a+" hr":"")+(r>0?r+" min":"")}(Number.parseInt(r));e.setState({route_distance:Number.parseFloat(n).toFixed(2),route_price:i,route_time:r,isRouteFound:!0});var i=Number.parseFloat(19*n).toFixed(2);document.getElementById("ride_price").innerHTML=i+" Birr",document.getElementById("distance").innerHTML=n+" km",document.getElementById("ride_time").innerHTML=l},e.NearestDriverComponent=function(e){var t=e.driver;return r.a.createElement("div",null,r.a.createElement(x.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:6,md:6},r.a.createElement(h.a,{src:t.car_pic,height:45,circle:!0})),r.a.createElement(N.a,{xs:6,md:6},r.a.createElement(h.a,{src:t.driver_pic,height:45,circle:!0}))),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:6,md:6},t.model),r.a.createElement(N.a,{xs:6,md:6},t.driver_name)),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:6,md:6},t.plate),r.a.createElement(N.a,{xs:6,md:6},t.driver_phone))))},e.state={dropoff_flag:!1,pickup_flag:!0,dropoff_location:"Select your pickup location",dropoff_latlng:{lat:9.0092,lng:38.7545},pickup_latlng:{lat:9.0092,lng:38.7645},route_price:0,route_distance:0,route_time:0,isRouteFound:!1,map:"",markersLayer:"",driver:{id:"",driver_name:"",driver_phone:"",model:"",plate:"",car_pic:"",driver_pic:""},socket_data:""},e.rideRequest=e.rideRequest.bind(Object(O.a)(Object(O.a)(e))),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=k.a.map("mapid").setView([9.0092,38.7645],16);this.setState({map:e}),k.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);var t=(new k.a.LayerGroup).addTo(e);this.setState({markersLayer:t}),this.setState({pickup_latlng:JSON.parse(localStorage.getItem("session_pickup"))})}},{key:"componentDidUpdate",value:function(){var e,t=this,a=this.state.map,n=this.state.markersLayer;if(a.on("click",function(a){D.reverseGeocode({lat:a.latlng.lat,lon:a.latlng.lng,addressdetails:!0}).then(function(r){n.clearLayers(),e=k.a.marker(a.latlng).addTo(n).bindPopup("<div class='popup-title'> Your dropoff location is </div><div class='popup-content'>"+r.display_name+"</div>").openPopup(),n.addLayer(e),t.setState({dropoff_location:r.display_name,dropoff_latlng:a.latlng,dropoff_flag:!0})}).catch(function(e){console.error(e)})}),this.state.dropoff_flag&&this.state.pickup_flag&!1===this.state.isRouteFound){var r=this.state.pickup_latlng,l=this.state.dropoff_latlng;this.findRoute(r,l)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"mapid",id:"mapid"}),r.a.createElement("div",{className:"div-request",id:"div-request"},r.a.createElement(this.NearestDriverComponent,{driver:this.state.driver})),r.a.createElement("div",{className:"div-ride-price"},r.a.createElement("div",null,r.a.createElement(x.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:4,md:4},"Price ",r.a.createElement(T.a,null,r.a.createElement("div",{id:"ride_price"}))),r.a.createElement(N.a,{xs:4,md:4},"Distance ",r.a.createElement(T.a,null,r.a.createElement("div",{id:"distance"}))),r.a.createElement(N.a,{xs:4,md:4},"Time ",r.a.createElement(T.a,null,r.a.createElement("div",{id:"ride_time"})))))),r.a.createElement("div",{id:"div-process",className:"div-process"},r.a.createElement("div",{className:"div-pickup-btn-box"},r.a.createElement(y.a,{onClick:function(t){return e.rideRequest(e.state.pickup_latlng,t)},bsStyle:"success",bsSize:"small"},"Request Driver")))))}}]),t}(n.Component),z=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={dropoff_location:"Lord my God you have plan in my life",dropoff_latlng:{lat:0,lng:0}},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q,{dropoff_latlng:this.state.dropoff_latlang}))}}]),t}(n.Component),A=(n.Component,B()("http://localhost:5000")),G=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).getDriver=function(t){I.a.ajax({type:"GET",url:"/driver/get",headers:{"x-auth":t},contentType:"application/json",success:function(e,t,a){console.log("hi",e),this.setState({driver:e})}.bind(Object(O.a)(Object(O.a)(e))),error:function(e,t,a){console.log("getdriver",a.toString()),console.error(e,t,a.toString())}.bind(Object(O.a)(Object(O.a)(e)))})},e.socketConnect=function(e){A.on("connect",function(){console.log("client connected"),A.emit("join",e,function(e){e&&alert(e)})}),A.on("driveRequest",function(e){console.log("drive request",e)}),A.on("disconnect",function(){console.log("client disconnected")})},e.socketJoin=function(e){},e.updateDriverLocation=function(t,a){console.log("current latlng",t);var n={_latlng:"POINT(".concat(t.lat," ").concat(t.lng,")")};I.a.ajax({type:"POST",url:"/driver/updateLocation",headers:{"x-auth":a},data:JSON.stringify(n),contentType:"application/json",success:function(e,t,a){}.bind(Object(O.a)(Object(O.a)(e))),error:function(e,t,a){console.error(e,t,a.toString())}.bind(Object(O.a)(Object(O.a)(e)))})},e.state={currentLatLng:{lat:0,lng:0},driver_id:"",markersLayer:"",map:"",auth:!1,driver:{firstName:"",middleName:"",email:"",mobile:"",status:""}},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getDriver(localStorage.getItem("auth")),this.setState({auth:localStorage.getItem("auth")});this.socketConnect({driver_id:4141});var e=k.a.map("mapid").setView([9.0092,38.7645],16);e.locate({setView:!0,maxZoom:17}),this.setState({map:e}),k.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);var t=(new k.a.LayerGroup).addTo(e);this.setState({markersLayer:t})}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.map;this.state.markersLayer;t.on("locationfound",function(a){e.updateDriverLocation(a.latlng,localStorage.getItem("auth"));var n=a.accuracy/128;k.a.marker(a.latlng).addTo(t).bindPopup("You are "+n+" meters from this point").openPopup(),k.a.circle(a.latlng,n).addTo(t),e.setState({currentLatLng:a.latlng})}),t.on("locationerror",function(e){alert(e.message)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"driver-dashboard"},r.a.createElement(x.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement("div",{id:"driver_name"},"Hi, ",this.state.driver.firstName))),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:6,sm:6,md:6},"earning"),r.a.createElement(N.a,{xs:6,sm:6,md:6},"ride ")),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:6,sm:6,md:6},r.a.createElement(T.a,null,"23,340 br")),r.a.createElement(N.a,{xs:6,sm:6,md:6},r.a.createElement(T.a,null,"170"))),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:6,sm:6,md:6},"charge "),r.a.createElement(N.a,{xs:6,sm:6,md:6},"account")),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:6,sm:6,md:6},r.a.createElement(T.a,{className:"charge"},"800 birr")),r.a.createElement(N.a,{xs:6,sm:6,md:6},r.a.createElement(T.a,{className:"account"},"active"))))),r.a.createElement("div",{className:"mapid",id:"mapid"}))}}]),t}(n.Component),J=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={latlng:{lat:0,lng:0}},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log("driver page"),r.a.createElement("div",null,r.a.createElement(G,null))}}]),t}(n.Component),H=a(224),U=a(229),V=a(233),Y=a(225),W=a(226),Z=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).validateDriverApply=function(){var t=[];return 0===e.state.firstName.length&&t.push("First name field is empty."),0===e.state.middleName.length&&t.push("Father name field is empty."),e.state.firstName.length<3&&t.push("Name field need to be at least 2 characters."),-1===e.state.email.indexOf("@")&&t.push("Email address is not valid."),0===e.state.mobile.length&&t.push("Mobile field is empty."),t},e.change=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.onDriverApply=function(t){t.preventDefault();var a=e.validateDriverApply();if(a.length>0){var n=e.getErrorList(a);Object(l.render)(r.a.createElement(V.a,{bsStyle:"danger"},n),document.getElementById("FormError"))}else{var i={firstName:e.state.firstName,middleName:e.state.middleName,email:e.state.email,mobile:e.state.mobile,password:e.state.password,re_password:e.state.re_password,plateNo:e.state.plateNo};e.driverApply(i),e.setState({firstName:"",middleName:"",email:"",mobile:"",password:"",re_password:"",plateNo:"",errors:[]})}},e.driverApply=function(t){I.a.ajax({type:"POST",url:"/driver/apply",data:JSON.stringify(t),contentType:"application/json",success:function(e,t,a){localStorage.setItem("auth",e.token),this.setState({auth:e.token}),console.log("token",e.token),console.log("driver applied success",e)}.bind(Object(O.a)(Object(O.a)(e))),error:function(e,t,a){console.error(e,t,a.toString())}.bind(Object(O.a)(Object(O.a)(e)))})},e.state={firstName:"",middleName:"",email:"",mobile:"",password:"",re_password:"",plateNo:"",errors:[],auth:!1},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getErrorList",value:function(e){var t=0;return e.map(function(e){return r.a.createElement("li",{key:t++},e)})}},{key:"render",value:function(){var e=this;return this.state.auth?r.a.createElement(U.a,{to:"/driver"}):r.a.createElement("div",null,r.a.createElement(x.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement("div",null,r.a.createElement(H.a,null,"NEW DRIVER",r.a.createElement(Y.a,{placement:"bottom",className:"in",id:"tooltip-bottom"},"New driver apply here."))))),r.a.createElement("form",null,r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:6,md:6},r.a.createElement(w.a,null,r.a.createElement(W.a,null,"First Name"),r.a.createElement(L.a,{name:"firstName",type:"text",value:this.state.firstName,placeholder:"First Name",onChange:function(t){return e.change(t)}}))),r.a.createElement(N.a,{xs:12,sm:6,md:6},r.a.createElement(w.a,null,r.a.createElement(W.a,null,"Father Name"),r.a.createElement(L.a,{name:"middleName",type:"text",value:this.state.middleName,placeholder:"Father Name",onChange:function(t){return e.change(t)}})))),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:6,md:6},r.a.createElement(w.a,null,r.a.createElement(W.a,null,"Email"),r.a.createElement(L.a,{name:"email",type:"text",value:this.state.email,placeholder:"email address",onChange:function(t){return e.change(t)}}))),r.a.createElement(N.a,{xs:12,sm:6,md:6},r.a.createElement(w.a,null,r.a.createElement(W.a,null,"Mobile"),r.a.createElement(L.a,{name:"mobile",type:"text",value:this.state.mobile,placeholder:"Mobile number",onChange:function(t){return e.change(t)}})))),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:6,md:6},r.a.createElement(w.a,null,r.a.createElement(W.a,null,"Password"),r.a.createElement(L.a,{name:"password",type:"password",value:this.state.password,placeholder:"Password",onChange:function(t){return e.change(t)}}))),r.a.createElement(N.a,{xs:12,sm:6,md:6},r.a.createElement(w.a,null,r.a.createElement(W.a,null,"Retype Password"),r.a.createElement(L.a,{name:"re_password",type:"password",value:this.state.re_password,placeholder:"Retype password",onChange:function(t){return e.change(t)}})))),r.a.createElement(S.a,{className:"text-center"},r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement(y.a,{type:"submit",bsSize:"large",bsStyle:"success",onClick:function(t){return e.onDriverApply(t)}},"APPLY TO DRIVE"))))))}}]),t}(n.Component),$=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).validateDriverLogin=function(){var t=[];return 0===e.state.loginEmail.length&&t.push("Email field is empty."),0===e.state.loginPassword.length&&t.push("Password field is empty."),t},e.change=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.onDriverLogin=function(t){t.preventDefault();var a=e.validateDriverLogin();if(a.length>0){var n=e.getErrorList(a);Object(l.render)(r.a.createElement(V.a,{bsStyle:"danger"},n),document.getElementById("FormError"))}else{var i={email:e.state.loginEmail,password:e.state.loginPassword};e.driverLogin(i),e.setState({loginEmail:"",loginPassword:"",errors:[]})}},e.driverLogin=function(t){console.log("test",t),I.a.ajax({type:"POST",url:"/driver/login",data:JSON.stringify(t),contentType:"application/json",success:function(e,t,a){localStorage.setItem("auth",e.token),this.setState({auth:e.token})}.bind(Object(O.a)(Object(O.a)(e))),error:function(e,t,a){console.log("errrrr",a.toString()),"Unauthorized"===a.toString()?Object(l.render)(r.a.createElement(V.a,{bsStyle:"danger",onDismiss:this.handleDismiss}," Invalid account ! please check your email and password"),document.getElementById("FormError")):Object(l.render)(r.a.createElement(V.a,{bsStyle:"danger",onDismiss:this.handleDismiss}," Somthing wrong ! try again."),document.getElementById("FormError"))}.bind(Object(O.a)(Object(O.a)(e)))})},e.state={loginEmail:"",loginPassword:""},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getErrorList",value:function(e){var t=0;return e.map(function(e){return r.a.createElement("li",{key:t++},e)})}},{key:"render",value:function(){var e=this;return this.state.auth?r.a.createElement(U.a,{to:"/driver"}):r.a.createElement("div",null,r.a.createElement(x.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement(H.a,null,"LOGIN",r.a.createElement(Y.a,{placement:"bottom",className:"in",id:"tooltip-bottom"},"Exsting driver login here.")))),r.a.createElement("form",null,r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement(w.a,null,r.a.createElement(W.a,null,"Email"),r.a.createElement(L.a,{name:"loginEmail",type:"text",value:this.state.loginEmail,placeholder:"Email Address",onChange:function(t){return e.change(t)}}))),r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement(w.a,null,r.a.createElement(W.a,null,"Password"),r.a.createElement(L.a,{name:"loginPassword",type:"password",value:this.state.loginPassword,placeholder:"Password",onChange:function(t){return e.change(t)}})))),r.a.createElement(S.a,{className:"text-center"},r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement(y.a,{type:"submit",bsSize:"large",bsStyle:"primary",onClick:function(t){return e.onDriverLogin(t)}},"LOGIN"))))))}}]),t}(n.Component),K=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={auth:""},localStorage.setItem("auth",""),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("auth");return console.log("received token",e),r.a.createElement("div",null,e?r.a.createElement("div",null," Driver dashboard "):r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement(H.a,null,"AWET"))),r.a.createElement(S.a,{className:"text-center"},r.a.createElement(N.a,{xs:12,sm:12,md:12},r.a.createElement("div",{id:"FormError"}))),r.a.createElement(S.a,null,r.a.createElement(N.a,{xs:12,sm:6,md:6},r.a.createElement("div",{className:"driverApplyBox"},r.a.createElement(Z,null))),r.a.createElement(N.a,{xs:12,sm:6,md:6},r.a.createElement("div",{className:"driverLoginBox"},r.a.createElement($,null)))))))}}]),t}(n.Component),Q=(a(212),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={lat:9.0089,lng:38.7629,zoom:16},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){this.state.lat,this.state.lng;return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(f.a,{path:"/",component:F,exact:!0}),r.a.createElement(f.a,{path:"/dropoff",component:z,exact:!0}),r.a.createElement(f.a,{path:"/driver",component:J,exact:!0}),r.a.createElement(f.a,{path:"/driver/login",component:K,exact:!0})))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[103,2,1]]]);
//# sourceMappingURL=main.d2803f59.chunk.js.map